# Bezpečnost a anonymita v blockchainu 🥷🔐

#####  Tyto skripta byly vytvořeny v rámci předmětu PVA a jsou určeny jen k seznámení s tímto tématem. Nikoho k ničemu nenabádájí a slouží pouze k rozšíření znalostí.

## Obsah:
### Teoretická část 
- Úvod
- Co to je blockchain?
- Jak funguje blockchain?
- Využití blockchainu
- Bezpečnost v blockchainu 
- Anonymita v blockchainu
### Praktická část
- Anonymita v blockchainu
- Vytvoření vlastního jednoduchého blockchainu 
 
# Teoretická část

## Úvod
V dnešní době, kdy digitální transformace ovlivňuje každodenní život a ekonomiku, se stává bezpečnost a anonymita dost populárními otázkami, se kterými se často setkáváme. Se vzrůstajícím využíváním nejrůznějších digitálních platforem, online transakcí a sběrem obrovských objemů dat vzniká samozřejmě potřeba zabezpečit naše osobní informace a digitální "stopu". Hlavně v oblasti financí a digitálních aktiv se klade důraz na nalezení efektivních opatření, která by zároveň chránila uživatele před možnými hrozbami ale přitom zachovávala jejich právo na soukromí a jednoduchost použití.

V souvislosti s tím, nabízí technologie blockchainu dá se říct revoluční přístup k zajištění bezpečnosti. Blockchain, známý svou decentralizovanou povahou a nezměnitelným záznamem transakcí, přináší nový rozměr zabezpečení dat. Tato inovativní technologie obsahuje potenciál posunout náš pohled na bezpečnost a anonymitu na novou, vyšší úroveň.

## Co to je blockchain?

Blockchain je inovativní technologie, která slouží k ukládání dat a informací tak, aby byly odolné vůči manipulacím a nedůvěře. Jedná se o distribuovaný systém, což znamená, že data nejsou uložena centrálně, ale jsou rozptýlena mezi mnoho počítačů (tzv. uzlů) napříč sítí.

Blockchain je jako digitální deník, který uchovává záznamy o různých transakcích. Každá transakce je zapsána do bloku, který je propojen s předchozím blokem. Celý tento řetězec bloků vytváří bezpečný a transparentní způsob ukládání informací.

Blockchain tak slouží jako efektivní nástroj pro udržení integrity dat. Kombinuje prvky decentralizace, kryptografie a transparentnosti, což vytváří nový standard pro bezpečné a důvěryhodné digitální prostředí. Tato technologie má potenciál změnit způsob, jakým interagujeme s digitálním světem a jak zabezpečujeme naše osobní informace.

## Jak funguje blockchain?

Tato decentralizovaná síť počítačů pracuje na principu kolektivního udržování sdíleného účetnictví, což vytváří transparentní prostředí pro všechny účastníky.

Každý uzel v síti, nazývaný také miner, má za úkol ověřovat transakce a pracovat na vytváření nových bloků. Proces ověřování transakcí je kritickým prvkem, který zajišťuje bezpečnost a důvěryhodnost celého systému. Když je transakce potvrzena většinou uzlů v síti, stává se nezměnitelnou a není možné ji zpětně měnit.

Bloky jsou propojeny do řetězce pomocí jedinečných hash kódů, které zabezpečují integritu dat v každém bloku. Tento řetězec bloků je veřejně dostupný a každý účastník může sledovat historii transakcí. Tímto způsobem blockchain podporuje otevřenost a důvěru mezi účastníky sítě.

Další klíčovou vlastností blockchainu je jeho odolnost vůči útokům. Díky distribuované povaze sítě není možné jednoduše ovlivnit všechny uzly najednou, což zvyšuje bezpečnost celého systému. Tato odolnost je klíčovým faktorem při zabezpečení digitálních aktiv a informací uložených v blockchainu.

Celkově lze říci, že blockchain přináší do světa digitálního záznamu a transakcí nový standard spolehlivosti, transparentnosti a bezpečnosti. Jeho využití se rozšiřuje do různých odvětví, od finančnictví po zdravotnictví, a představuje fundamentální krok směrem k budoucnosti decentralizovaných a důvěryhodných digitálních systémů.

## Využití blockchainu
### 1. **Kryptoměny:**

-   **Bitcoin:** První a nejznámější kryptoměna, která využívá blockchain k provádění decentralizovaných a anonymních finančních transakcí.

### 2. **Smart kontrakty:**

-   Ethereum a další platformy umožňují tvorbu tzv. "chytrých smluv", což jsou programy na blockchainu, které automaticky provádějí a upravují smlouvy podle předem daných podmínek.

### 3. **Supply Chain:**

-   Blockchain lze využít pro sledování původu a cesty výrobků v dodavatelském řetězci, což zvyšuje transparentnost a odhaluje možné problémy.

### 4. **Zdravotní péče:**

-   Ukládání zdravotních záznamů na blockchainu může zlepšit bezpečnost a vzájemnou kompatibilitu dat v oblasti zdravotnictví.

### 5. **Elektronické volby:**

-   Blockchain může poskytnout bezpečné a transparentní prostředí pro elektronické volby, chránící integritu hlasů a zajišťující důvěru ve volební proces.

### 6. **Digitální identita:**

-   Vytváření digitálních identit na blockchainu může pomoci s bezpečným ověřováním a správou osobních údajů.

### 7. **Finanční služby:**

-   Blockchain umožňuje rychlejší a levnější převody peněz mezi různými bankami nebo přeshraniční transakce.

Blockchain tedy není pouze prostředkem pro digitální měny, ale je revoluční technologií, která mění různá odvětví a přináší vylepšení do společenských systémů. Zajišťuje transparentnost, bezpečnost a spolupráci napříč různými oblastmi.

## Bezpečnost v blockchainu

Bezpečnost v blockchainu spočívá v kombinaci několika klíčových technologických prvků a šifer, které společně zajišťují integritu, nezměnitelnost a důvěrnost dat v této distribuované síti.

### 1. **Kryptografické Hašování:**

Každý blok v blockchainu je spojen s předchozím blokem prostřednictvím jedinečného kódu, který se nazývá haš. Hašování je matematický proces, který převádí data do krátkého kódu, který slouží jako digitální otisk obsahu bloku. I malá změna v datech vytvoří úplně odlišný haš, což ztěžuje manipulaci s existujícími bloky.

### 2. **Dezentralizace:**

Bezpečnost blockchainu je posílena jeho dezentralizovanou povahou. Data nejsou uložena centrálně, ale jsou distribuována mezi všechny uzly v síti. To znamená, že žádný jediný bod selhání nemůže ohrozit celý systém. Útočník by musel ovládnout většinu uzlů, což je prakticky nemožné.

### 3. **Kryptografické podpisy:**

Transakce v blockchainu jsou potvrzovány kryptografickými podpisy, což znamená, že každý uživatel má svůj vlastní privátní klíč pro podepisování transakcí. Tento podpis je ověřován veřejným klíčem, což zajišťuje, že pouze oprávněné strany mohou provádět transakce.

### 4. **Koncept Proof-of-Work a Proof-of-Stake:**

Pro přidání nového bloku do blockchainu musí těžař nebo účastník sítě dokázat, že vykonal určité množství práce nebo vlastní dostatečné množství kryptoměny. Tento proces, známý jako "těžba", ztěžuje potenciálním záškodníkům zneužití systému a zároveň odměňuje ty, kteří přispívají k bezpečnosti sítě.

### 5. **Šifrování:**

Data uložená v blocích mohou být šifrována, což zajišťuje, že pouze oprávněné osoby mohou číst obsah. Tím se ochraňují citlivé informace, jako jsou například osobní údaje v zdravotnictví nebo podnikové transakce.

### 6. **Smart-contracts:**

Chytré kontrakty jsou programy napsané na blockchainu, které automaticky provádějí či upravují smlouvy podle předem daných podmínek. Tyto kontrakty pomáhají eliminovat potřebu třetí strany a přinášejí další vrstvu bezpečnosti.

Bezpečnost v blockchainu tak spočívá v kombinaci těchto technologií a koncepcí, které vytvářejí robustní a odolný systém, schopný odolávat různým hrozbám a zajišťovat důvěrnost a integritu dat.

## Anonymita v blockchainu

Anonymita v blockchainu je částečně zajišťována několika klíčovými technologickými prvky, které chrání identity účastníků sítě. Zde jsou některé aspekty, které přispívají k anonymitě v blockchainu:

### 1.  **Veřejné a privátní klíče:**

Každý účastník v blockchainu má svůj veřejný a privátní klíč. Veřejný klíč slouží k identifikaci uživatele, zatímco privátní klíč je tajný a slouží k podepisování transakcí. Transakce jsou propojeny s veřejným klíčem, ale samotná identita uživatele zůstává skrytá.
### 2.  **Náhodné adresy:**
    
Každá transakce v blockchainu se provádí pomocí náhodně generované adresy. Tato adresa nemá přímý vztah k reálné identitě účastníka, což ztěžuje sledování transakcí.
### 3.  **Smíšené transakce (Coin Mixing nebo CoinJoin):**
    
Některé kryptoměny a platformy umožňují tzv. smíšené transakce, kdy jsou fondy od více účastníků seskupeny do jedné transakce. To má za následek ztížení identifikace, který účastník odeslal který obnos.
### 4.  **Ring Signatures:**
    
Některé kryptoměny, jako například Monero, využívají ring signatury. Při použití ring signatur je nemožné určit, kdo přesně podepsal transakci, protože vytváří skupinu náhodně vybraných podpisů a jediný platný podpis není jednoznačně přisluhující se konkrétní osobě.
### 5.  **Zero-Knowledge Proof:**
    
Zero-Knowledge Proof (důkaz nulové znalosti) umožňuje doložit, že někdo zná určitou informaci, aniž by tuto informaci odhalil. V blockchainu může být používán k potvrzení platnosti transakce bez zveřejnění konkrétních detailů transakce.

# Praktická část

## Anonymita v blockchainu (kryptoměny)
Jelikož mně toto téma přijde hodně zajímavým, tak jsem se rozhodl ho sem přidat. Zaměřím se hlavně na anonymitu spojenou se světem kryptoměn.

Většina kryptoměn, jako například Bitcoin, nemá anonymní transakce. Každá transakce na blockchainu je veřejně zaznamenána a dostupná pro každého. To znamená, že i když nevíte přesně, kdo vlastní danou peněženku, můžete sledovat veřejný tok prostředků. Zpravidla lze zjistit veřejnou adresu peněženky a historii transakcí spojenou s touto adresou (odkud, kam a v jakém množství šly kryptoměny).

Naopak existují kryptoměny navržené speciálně s ohledem na větší anonymitu. Monero je jednou z nich. Monero používá různé techniky, jako jsou náhodné adresy a tzv. "ring signatures", což jsou digitální podpisy, které maskují skutečný zdroj transakce. To ztěžuje identifikaci konkrétních účastníků v transakcích a zvyšuje úroveň anonymizace.

Přestože tyto anonymní kryptoměny nabízejí větší soukromí, není to neomylný systém. Při dostatečné snaze a resourcích lze některé stopy transakcí odhalit. Existují také různé techniky a nástroje, které se snaží identifikovat a sledovat pohyb kryptoměn v síti.

Mimo jiné ale někteří uživatelé kryptoměn mohou používat tzv. "mixing" nebo "tumbling" služby. Tyto služby smíchávají prostředky od různých uživatelů, což znepřehledňuje původ peněz a ztěžuje sledování transakcí. I když tyto služby mohou poskytnout určitou úroveň anonymizace, není to bezpečný způsob, jak úplně skrýt pohyb kryptoměn, **a v některých případech mohou být považovány za nelegální nebo podezřelé.**

![Crypto Mixers - how do they work](https://s3.cointelegraph.com/uploads/2021-04/d3810bf2-9211-48ad-9bac-d4283da8cb0a.jpg)
Zde je ukázka toho, jak takové "mixery" fungují.

Jak jsem zmiňoval předtím, všechny například Bitcoinu jsou veřejně dostupné a dohledatelné, například na této stránce: [Blockchain.com](https://www.blockchain.com/explorer/mempool/btc) 
Vidíme zde, kdy, z jaké adresy na jakou adresu a kolik kryptoměn se odeslalo. 

![Bitcoin transaction](https://miro.medium.com/max/3200/0*88e8vtNynonhHahT.)
Informace o transakci můžou vypadat jak na obrázku nahoře.

Jako poslední bych zase zmínil "anonymní" kryptoměny. Pokud někoho zajímá více do hloubky jak funguje např. Monero, tak doporučuji k přečtení: ["Is Monero anonymous?"](https://www.coinbureau.com/analysis/is-monero-anonymous/)

## Vytvoření vlastního jednoduchého blockchainu (Proof-Of-Work)

Nyní, když už víme co to je blockchain, jak funguje a co obnáší bezpečný blockchain - pojďme si vytvořit vlastní! Napíšeme si společně kód v Pythonu, který vytvoří jednoduchý blockchain s proof-of-work mechanismem. Každý blok bude obsahovat index, předchozí hash, timestamp, data, aktuální hash a proof-of-work hodnotu.

### 1.  **Definice třídy `Block`:**


```python 
class Block:
    def __init__(self, index, previous_hash, timestamp, data, hash, proof):
        self.index = index
        self.previous_hash = previous_hash
        self.timestamp = timestamp
        self.data = data
        self.hash = hash
        self.proof = proof

```
Tato část kódu definuje třídu `Block`, která představuje jednotlivé bloky v blockchainu. Každý blok má několik atributů, včetně indexu, předchozího hashe, časového razítka, dat, aktuálního hashe a hodnoty proof-of-work.

### 2. **Funkce `calculate_hash`:**
```python
def calculate_hash(index, previous_hash, timestamp, data, proof):
    value = str(index) + str(previous_hash) + str(timestamp) + str(data) + str(proof)
    return hashlib.sha256(value.encode()).hexdigest()
```
Tato funkce slouží k výpočtu hashe pro daný blok. Kombinuje různé informace o bloku a vytváří hash těchto dat pomocí algoritmu SHA-256.

### 3. **Funkce `mine_block`:**
```python
def mine_block(previous_block, data):
    index = previous_block.index + 1
    timestamp = time.time()
    proof = 0
    previous_hash = previous_block.hash

    while not is_valid_proof(previous_hash, timestamp, data, proof):
        proof += 1

    hash_value = calculate_hash(index, previous_hash, timestamp, data, proof)
    return Block(index, previous_hash, timestamp, data, hash_value, proof)
```
Tato funkce reprezentuje proces těžby nového bloku. Přijímá předchozí blok a nová data. Postupně zvyšuje hodnotu proof, dokud nenajde takovou hodnotu, která splňuje podmínky proof-of-work. Poté vytvoří nový blok a vrátí ho.

### 4. **Funkce `is_valid_proof`:**
```python
def is_valid_proof(previous_hash, timestamp, data, proof):
    value = str(previous_hash) + str(timestamp) + str(data) + str(proof)
    guess_hash = hashlib.sha256(value.encode()).hexdigest()
    return guess_hash[:4] == "0000"  # Požadovaný počet nulových bitů pro proof-of-work
```

Tato funkce ověřuje, zda daná hodnota proof splňuje podmínky proof-of-work. Kontroluje, jestli hash vytvořený z kombinace různých dat začíná určeným počtem nulových bitů.

### 5. **Inicializace blockchainu:** 
```python
blockchain = [Block(0, "0", time.time(), "Genesis Block", calculate_hash(0, "0", time.time(), "Genesis Block", 0), 0)]
```
Zde vytváříme počáteční blok, nazývaný Genesis Block, který slouží jako základní kámen celého blockchainu.

### 6. **Těžba nových bloků:**
```python
for i in range(1, 5):
    new_block_data = f"Data of Block {i}"
    new_block = mine_block(blockchain[-1], new_block_data)
    blockchain.append(new_block)

    print(f"Block #{new_block.index} mined.")
    print(f"Hash: {new_block.hash}")
    print(f"Proof: {new_block.proof}")
    print("\n")
```
Tato část kódu demonstruje těžbu několika nových bloků. Každý nový blok se těží na základě předchozího bloku, a výsledek je poté vypsán, včetně indexu, hashe a hodnoty proof-of-work.

### Output kódu:
Náš kód můžeme následovně vložit například do tady toho [Python sandboxu](https://edube.org/sandbox) a dostaneme výsledný output:
> Block #1 mined.
Hash: 261459ad6594c3092d25919b415340733b5ebeb62c1100ad0a58e75a16106805
Proof: 6685

>Block #2 mined.
Hash: 9d8f87071c969ad16bdb4f6cf4a95e89f94c9d789452debe8f40554b52d40598
Proof: 44030

> Block #3 mined.
Hash: 1571d233cf4032b4dd8ff7c7aa645acf8dc4c29149e1f6f92c363f34d36e81d2
Proof: 1364

>Block #4 mined.
Hash: 578233b2ac1336865641358820015af87332c594b1d03b289cd588b3992af7c0
Proof: 62135

> Block #5 mined.
Hash: 37e2942368559408f7247685e61083636faf2f9417fe87e8bd4488cf321bfe56
Proof: 22370

# Závěr
Děkuji Ti, že jsi dočetl až sem a doufám, že moje skripta Tě naučili něčemu novému a zajímavému!

> (c) Marat Isaev 
